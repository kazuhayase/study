Ubuntu clean install.txt

- Todo
virtualbox
anki
latex
Music; wmaになっているものをCDから読み込む


[OS]
Remix
host=h110
User=kazuyoshi

[smb mount]

sudo apt install cifs-utils
/etc/fstab　に、以下を追加
//{%smb server}/disk1_pt1	/media/disk1_pt1	cifs	username=kazuyoshi,password=xxxx,vers=1.0



[application]

- Done
Thunderbird; software(snap). homeコピー＋cloud同期 
  # Ubuntuには最初から入っているようで、二重に入っている状態になっている。。。
Edge; web DL(deb)+software のinstall機能.  cloud同期
Slack; web DL(deb)+software のinstall機能. cloud同期
VSCode; web DL(deb)+software のinstall機能. cloud同期
git; apt install. homeコピー＋cloud同期
ncdu; apt install.
VLC; software(snap).
MEGAsync&nautilus; web DL+software のinstall機能.  cloud同期
samba; フォルダーの共有をすると自動的に追加インストールとなった。
smb4k; software(snap).

OneDrive; 非公式 OpenSuSE Build Services package
------
https://pc.watch.impress.co.jp/docs/column/ubuntu/1425292.html
https://zenn.dev/bluesilvercat/articles/83700a96fb7f36

wget -qO - https://download.opensuse.org/repositories/home:/npreining:/debian-ubuntu-onedrive/xUbuntu_22.04/Release.key | gpg --dearmor | sudo tee /usr/share/keyrings/obs-onedrive.gpg > /dev/null
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/obs-onedrive.gpg] https://download.opensuse.org/repositories/home:/npreining:/debian-ubuntu-onedrive/xUbuntu_22.04/ ./" | sudo tee /etc/apt/sources.list.d/onedrive.list
sudo apt-get update
sudo apt install onedrive
sudo mkdir /var/log/onedrive
sudo chown root.users /var/log/onedrive
sudo chmod 0775 /var/log/onedrive
cat /etc/group | grep users # 確認
sudo usermod -a -G users <your-user-name> # 追加

onedrive --reauth
-->　端末のURLをCTRL＋右クリックでブラウザアクセスし、そのままWebでMSアカウントログインしたあと、空白画面になるので、アドレスバーのURLをコピーして端末に貼り付ける。

systemctl --user start onedrive.service
systemctl --user enable onedrive.service
------


viber; software(snap) "viber-unofficial"はActivationできず。
       viberから web DL(deb)+software のinstall機能. homeコピー＋cloud同期
       homeしたに .ViberPC/というフォルダができていて、それがコピーされたため起動できた。
       そのあとQRコードでログインしなおし、同期開始。なぜか日本語入力もできた。
------
(参考)
前回は, home下か /usr/share/applications の .desktopファイルをいじったような気が
https://unix.stackexchange.com/questions/319341/how-do-i-debug-a-desktop-file
Terminal=true
TerminalOptions=\s--noclose
------



(etc.)
Music; WinMac0001/Musicに上書きコピーした

WinMac0001/MP3-Music
WinMac0001/202006Music
Windows/Users/kazuyoshi.hayase/Music/iTunes/iTunes\ Media/Music

https://gihyo.jp/admin/serial/01/ubuntu-recipe/0685
音楽プレイヤーはデフォルトで入っているRhythmbox、DAAPというApple音楽共有はOwnTone。
https://www.pc-reuse-shop.com/2020/05/15/ubuntu%E3%81%AE%E9%9F%B3%E6%A5%BD-%E5%8B%95%E7%94%BB%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92iphone-ipad-%E3%81%B8%E9%80%81%E4%BF%A1%E3%81%99%E3%82%8B/
"EZMP3 player" (iOS)で、ubuntu->iphoneコピーできる?


フォルダの構造；アルバム、のみとする。

.local/share/rhythmbox/
playlists.xml, rhythmdb.xml




重複ファイルを削除
sudo apt-get install fdupes
fdupes -r .







[home]
*方針: cleanでできたものに上書き.

# cd /media/kazuyoshi/LinuxHome/
# ls
kazuyoshi  lost+found  partimag  temuser  zcash

  - partimag はempty
  - temuser は新規に作らせる
  - zcash は放置
--> kazuyoshiのみ上書きコピーする

[home/kazuyoshi]
======================================================
# tar cf - kazuyoshi | (cd /home; tar xf -)

---
tarコピーの実行中に
vscode か edge のlogが実行中に変更されたと出たが無視
おそらく、同期の影響
　vscodeはMS/GHubのアカウント同期していてExtensionがインストールされていく
　edgeも同様

また、何故か並行して、
「残念ながら、Ubuntu22.04で内部エラーが発生しました。」
/usr/libexec/tracker-miner-fs-3
crash
segv g_closure_invoke()
ということで、関係ないと思われる。無視。
---

+ここで一旦ログアウトして、再度ログインして様子を見る。

- iconが大きいままだったり、お気に入りアプリのアイコンが固定されていなかったり、期待ハズレ
　（未インストールがどれだったか思い出しながら入れていく）
- bashプロンプト設定はコピーされている。Terminalの設定も違うような気がするが、このままにしておく。
- Slackは自動起動した。これはデフォルト設定なのかもしれないが、ログイン状態はキープされてたので、homeをコピーした効果かもしれない
- 容量不足で外付けHDDにsymlinkしていたものが軒並み外れてるので、一旦、rm

$ rm local-installs Downloads Dropbox MEGAsync OneDrive

- デフォルトでできるフォルダの英語版がコピーされている。日本語版にコピーして削除するか?
  後で切り分けるため、英語フォルダ名のままsubdirectoryとしてコピーする
$ tar cf - Desktop | (cd デスクトップ; tar xf -)
$ tar cf - Documents | (cd ドキュメント; tar xf -)
$ tar cf - Pictures | (cd ピクチャ; tar xf -)
$ tar cf - Public | (cd 公開; tar xf -)
$ tar cf - Templates | (cd テンプレート; tar xf -)
$ tar cf - Videos | (cd ビデオ; tar xf -)

- なぜかミュージック(Music)は無かった

$ ls -lR デスクトップ ドキュメント ピクチャ 公開 テンプレート ビデオ
$ rm -rf Desktop Documents Pictures Public Templates Videos

- 後日EdgeからのDLはDownloadsが再度作成されてそこに配置された。

- デスクトップに変化なし。ログアウトしないと反映されないのかも？

- プリンタ関係uninstaller削除しておく
$ rm uninstaller_MFCJ6973CDW  uninstaller_brscan-skey  uninstaller_brscan4

- その他
$ rm vboxdrv.~signed~ ddrescue_hdd.map

- Thunderbird 起動してみる
想定通り、アカウントなど、そのまま動いた。

--- gomi memo
for d in (Desktop Documents Pictures Public Templates) \
do\
tar cf - $d | (cd )
======================================================



[/etc/passwd,groups]
